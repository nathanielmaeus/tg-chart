{
  "version": 3,
  "file": "bundle.css",
  "sources": [
    "..\\src\\App.svelte",
    "..\\src\\components\\barChart.svelte",
    "..\\src\\components\\diagram.svelte",
    "..\\src\\components\\map.svelte"
  ],
  "sourcesContent": [
    "<script>\n  import BarChart from \"./components/barChart.svelte\";\n  import Diagram from \"./components/diagram.svelte\";\n  import { data } from \"./data.js\";\n\n  import Lamp from \"./components/lamp.svelte\";\n  import { theme } from \"./store/stats\";\n\n  let color = \"#fff\";\n\n  const xData = data.columns[0].slice(1);\n  const products = {\n    banans: data.columns[1].slice(1),\n    oranges: data.columns[2].slice(1),\n    apples: data.columns[3].slice(1)\n  };\n  const product = {\n    banans: data.columns[1].slice(1)\n  };\n  const colors = Object.values(data.colors);\n\n  const changeTheme = () => {\n    let currentTheme = $theme === \"light\" ? \"dark\" : \"light\";\n    theme.update(() => currentTheme);\n    color = $theme === \"light\" ? \"#fff\" : \"#FFD15C\";\n  };\n</script>\n\n<style>\n  .light {\n    background: white;\n    color: #000;\n    transition: 0.3s;\n  }\n  .dark {\n    background: rgb(36, 47, 62);\n    color: rgb(255, 255, 255);\n    transition: 0.3s;\n  }\n  .app {\n    position: relative;\n    display: flex;\n    flex-direction: column;\n  }\n\n  .button {\n    display: flex;\n    align-items: center;\n    max-width: 248px;\n    padding: 8px 32px;\n    font-size: 24px;\n    border-radius: 5px;\n    border: none;\n    outline: none;\n    cursor: pointer;\n    transition: 0.3s;\n  }\n\n  .button--light {\n    background: rgb(36, 47, 62);\n    color: #fff;\n  }\n  .button--dark {\n    background: #fff;\n    color: rgb(36, 47, 62);\n  }\n\n  header {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    position: relative;\n    margin: 48px 84px;\n  }\n  .describe {\n    margin: 24px;\n  }\n  h3 {\n    font-size: 21px;\n    font-weight: 600;\n    margin-bottom: 10px;\n  }\n\n  p {\n    font-size: 16px;\n  }\n</style>\n\n<div class=\"app {$theme}\">\n  <header>\n    <div class=\"describe\">\n      <h3>Chart Contest</h3>\n      <p>These charts are made with canvas and vanila javascript.</p>\n    </div>\n    <button class=\"button button--{$theme}\" on:click={changeTheme}>\n      <Lamp {color} />\n    </button>\n  </header> \n  <BarChart {xData} yData={product} {colors} title=\"Chart 1\"/>\n  <BarChart {xData} yData={products} {colors} title=\"Chart 2\"/>\n  <Diagram {xData} yData={product} {colors} title=\"Chart 3\"/>\n  <Diagram {xData} yData={products} {colors} title=\"Chart 4\"/>\n</div>\n",
    "<script>\r\n  import { onMount, afterUpdate } from \"svelte\";\r\n  import { data } from \"../data.js\";\r\n  import { ratio, theme } from \"../store/stats.js\";\r\n  import { changeScale } from \"./helpers.js\";\r\n\r\n  import formateDate from \"../utils/formateDate.js\";\r\n  import findMaxValue from \"../utils/findMaxValue.js\";\r\n  import Map from \"./map.svelte\";\r\n\r\n  let canvasRef;\r\n  let chartRef;\r\n\r\n  let ctx;\r\n\r\n  export let xData;\r\n  export let yData;\r\n  export let colors;\r\n  export let title;\r\n\r\n  let widthColumn = 30;\r\n  let tooltip;\r\n  let limit = 0;\r\n  let currentPositionX = 0;\r\n  let initialPositionX = 0;\r\n  let isMouseDown = false;\r\n  let positionXMap = 0;\r\n  let offset = 0;\r\n  let currentColumn;\r\n\r\n  const widthCanvas = xData.length * widthColumn;\r\n  const dataArray = xData.map((val, i) => i * widthColumn);\r\n\r\n  $: columns = xData.map((val, i) => i * widthColumn + currentPositionX);\r\n\r\n  let endDay;\r\n  let startDay;\r\n\r\n  $: {\r\n    startDay = Math.round(-currentPositionX / widthColumn);\r\n    endDay = startDay + Math.round(1000 / widthColumn);\r\n  }\r\n\r\n  onMount(() => {\r\n    if (canvasRef.getContext) {\r\n      ctx = canvasRef.getContext(\"2d\");\r\n      draw(ctx);\r\n    }\r\n  });\r\n\r\n  afterUpdate(() => {\r\n    offset = chartRef.offsetLeft;\r\n  });\r\n\r\n  const draw = () => {\r\n    drawRectangle(ctx, 5);\r\n    drawAxis(ctx);\r\n    drawTextX(ctx);\r\n    drawTextY(ctx);\r\n  };\r\n\r\n  const drawRectangle = (ctx, h) => {\r\n    const dataKeys = Object.keys(yData);\r\n    const max = findMaxValue(yData);\r\n    const scale = 100 / (max * dataKeys.length);\r\n    const width = h === 5 ? widthColumn : 1000 / xData.length;\r\n\r\n    for (let i = 0; i < xData.length; i++) {\r\n      let point = h === 5 ? 40 : 0;\r\n      dataKeys.map((key, index) => {\r\n        const computedHeight = yData[key][i] * h * scale;\r\n        ctx.fillStyle = colors[index];\r\n        ctx.fillRect(\r\n          i * width,\r\n          h * 100 - computedHeight - point,\r\n          width,\r\n          computedHeight\r\n        );\r\n        point = point + computedHeight;\r\n      });\r\n    }\r\n  };\r\n\r\n  const drawAxis = ctx => {\r\n    for (let i = 0; i < 5; i++) {\r\n      ctx.fillStyle = \"#EAEBF3\";\r\n      ctx.lineWidth = 0.3;\r\n      ctx.beginPath();\r\n      ctx.moveTo(widthColumn, 92 * i);\r\n      ctx.lineTo(widthCanvas * 3, 92 * i);\r\n      ctx.stroke();\r\n    }\r\n  };\r\n\r\n  const drawTextX = ctx => {\r\n    ctx.fillStyle = \"#a6a6a6\";\r\n    for (let i = 0; i < xData.length; i++) {\r\n      if (i % 5 === 0) {\r\n        const date = formateDate(xData[i], \"short\");\r\n        ctx.font = \"14px Roboto\";\r\n        ctx.fillText(date, widthColumn * (i + 1), 480);\r\n      }\r\n    }\r\n  };\r\n\r\n  const drawTextY = (ctx, y = 15) => {\r\n    ctx.fillStyle = \"#737373\";\r\n    for (let i = 0; i < 5; i++) {\r\n      const date = formateDate(xData[i], \"short\");\r\n      ctx.font = \"14px Roboto\";\r\n      ctx.fillText(100 - i * 20, y, i * 92 - 5);\r\n    }\r\n  };\r\n\r\n  const getLimitBorder = x => {\r\n    if (!currentColumn || !isMouseDown) {\r\n      currentColumn = findColumnIndex(x);\r\n    }\r\n    limit = currentColumn * widthColumn + widthColumn + currentPositionX;\r\n  };\r\n\r\n  const findColumnIndex = (x, dataArray = columns) => {\r\n    const position = x - offset;\r\n    return dataArray.findIndex(\r\n      (column, i) => column <= position && position <= dataArray[i + 1]\r\n    );\r\n  };\r\n\r\n  const checkTooltipBorders = x => {\r\n    let rightX = x - offset;\r\n\r\n    if (rightX < 100) {\r\n      rightX = 100;\r\n    }\r\n    if (rightX > 940) {\r\n      rightX = 940;\r\n    }\r\n\r\n    return rightX;\r\n  };\r\n\r\n  const updateDataTooltip = e => {\r\n    const index = findColumnIndex(e.clientX);\r\n    const dateColumn = formateDate(xData[index], \"long\");\r\n    const views = Object.keys(yData).map(key => yData[key][index]);\r\n\r\n    tooltip = {\r\n      ...tooltip,\r\n      date: dateColumn,\r\n      views\r\n    };\r\n  };\r\n\r\n  const updatePositionTooltip = e => {\r\n    tooltip = {\r\n      ...tooltip,\r\n      x: checkTooltipBorders(e.clientX),\r\n      y: e.clientY\r\n    };\r\n  };\r\n\r\n  const renderTooltip = e => {\r\n    if (!chartRef.contains(e.target)) {\r\n      tooltip = null;\r\n      return;\r\n    }\r\n    updateDataTooltip(e);\r\n    updatePositionTooltip(e);\r\n  };\r\n\r\n  const checkChartBorders = (x, translate, widthChart) => {\r\n    let position = translate;\r\n    const currentWidth = xData.length * widthColumn - 1000;\r\n\r\n    if (translate >= currentWidth) {\r\n      return -currentWidth + 10;\r\n    }\r\n    if (translate <= 0) {\r\n      position = 0;\r\n    } else {\r\n      position = -translate;\r\n    }\r\n\r\n    return position;\r\n  };\r\n\r\n  const handleMouseMove = e => {\r\n    if (isMouseDown) {\r\n      const translate = -1 * (e.clientX - initialPositionX);\r\n\r\n      currentPositionX = checkChartBorders(\r\n        e.clientX,\r\n        translate,\r\n        widthCanvas - 1000\r\n      );\r\n      positionXMap = currentPositionX / $ratio;\r\n      updatePositionTooltip(e);\r\n    } else {\r\n      renderTooltip(e);\r\n    }\r\n    getLimitBorder(e.clientX);\r\n  };\r\n\r\n  const handleMouseDown = e => {\r\n    initialPositionX = e.pageX + -1 * currentPositionX;\r\n    isMouseDown = true;\r\n  };\r\n\r\n  const handleMouseLeave = () => {\r\n    isMouseDown = false;\r\n    tooltip = null;\r\n  };\r\n\r\n  const handleMouseEnter = e => {\r\n    renderTooltip(e);\r\n  };\r\n\r\n  const moveSlider = ({ detail }) => {\r\n    const { positionXMap } = detail;\r\n    currentPositionX = -positionXMap * $ratio;\r\n  };\r\n\r\n  const handleChangeScale = ({ detail }) => {\r\n    if (!ctx) {\r\n      return;\r\n    }\r\n\r\n    const { newRatio, position, column } = changeScale({ detail });\r\n\r\n    widthColumn = column;\r\n    currentPositionX = position;\r\n    ratio.update(() => newRatio);\r\n\r\n    ctx.clearRect(0, 0, widthCanvas * 3, 504);\r\n    draw(ctx);\r\n  };\r\n</script>\r\n\r\n<style>\r\n  .title {\r\n    margin-bottom: 24px;\r\n    font-weight: bold;\r\n    font-size: 18px;\r\n  }\r\n  .chart-one {\r\n    margin: 48px auto;\r\n  }\r\n  .chart {\r\n    position: relative;\r\n    height: 505px;\r\n    width: 1000px;\r\n    overflow: hidden;\r\n  }\r\n  .chart:hover .wrapper {\r\n    opacity: 0.3;\r\n  }\r\n  .wrapper {\r\n    position: absolute;\r\n    top: 0;\r\n    height: 100%;\r\n    width: 100%;\r\n    opacity: 0;\r\n    background: white;\r\n    transition: opacity 0.3s;\r\n  }\r\n  .wrapper--light {\r\n    background: white;\r\n  }\r\n  .wrapper--dark {\r\n    background: rgb(36, 47, 62);\r\n  }\r\n\r\n  .left {\r\n    left: 0;\r\n  }\r\n  .tooltip {\r\n    position: absolute;\r\n    width: 140px;\r\n    padding: 8px 12px;\r\n    box-shadow: 1px 1px 4px 0px rgba(0, 0, 0, 0);\r\n    border-radius: 10px;\r\n  }\r\n\r\n  .info {\r\n    display: flex;\r\n    flex-direction: column;\r\n  }\r\n\r\n  .tooltip--light {\r\n    background: #fff;\r\n    border: 1px solid rgb(238, 227, 227);\r\n    color: #000;\r\n  }\r\n  .tooltip--dark {\r\n    background: #1c2533;\r\n    border: 1px solid #1c2533;\r\n    color: #fff;\r\n  }\r\n  .date {\r\n    line-height: 1.5em;\r\n    font-weight: 600;\r\n  }\r\n  .views {\r\n    display: flex;\r\n    flex-direction: row;\r\n    justify-content: space-between;\r\n    font-weight: 600;\r\n    color: #64aded;\r\n  }\r\n  .header {\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: space-between;\r\n  }\r\n</style>\r\n\r\n<div class=\"chart-one\">\r\n  <div class=\"header\">\r\n    <p class=\"title\">{title}</p>\r\n    <p>\r\n      {formateDate(xData[startDay], 'short')} - {formateDate(xData[endDay], 'short')}\r\n    </p>\r\n  </div>\r\n  <div\r\n    class=\"chart\"\r\n    bind:this={chartRef}\r\n    on:mousemove={handleMouseMove}\r\n    on:mousedown={handleMouseDown}\r\n    on:mouseleave={handleMouseLeave}\r\n    on:mouseup={() => (isMouseDown = false)}\r\n    style={isMouseDown ? 'cursor: grabbing' : 'cursor: grab'}>\r\n\r\n    <canvas\r\n      bind:this={canvasRef}\r\n      on:mouseover={handleMouseEnter}\r\n      class=\"cnvs\"\r\n      width={widthCanvas * 3}\r\n      height=\"504px\"\r\n      style=\"transform: translateX({currentPositionX}px);\" />\r\n\r\n    <div\r\n      class=\"wrapper wrapper--{$theme} left\"\r\n      style=\"transform: translateX({limit}px);\" />\r\n    <div\r\n      class=\"wrapper wrapper--{$theme} right\"\r\n      style=\"transform: translateX({limit - widthColumn - 1000}px);\" />\r\n\r\n    {#if tooltip}\r\n      <div\r\n        class=\"tooltip tooltip--{$theme}\"\r\n        style=\"top: 50px; left: {tooltip.x - 65}px\">\r\n        <p class=\"date\">{tooltip.date}</p>\r\n        <section class=\"info\">\r\n          {#each tooltip.views as views, i}\r\n            <div class=\"views\" style=\"color: {colors[i]}\">\r\n              {Object.keys(yData)[i]}:\r\n              <span>{views}</span>\r\n            </div>\r\n          {/each}\r\n\r\n        </section>\r\n      </div>\r\n    {/if}\r\n  </div>\r\n\r\n  <Map\r\n    positionChart={positionXMap}\r\n    on:move={moveSlider}\r\n    draw={drawRectangle}\r\n    columnChart={widthColumn}\r\n    on:changeScale={handleChangeScale}\r\n    {xData}\r\n    yData={yData.banans} />\r\n</div>\r\n",
    "<script>\r\n  import { onMount, afterUpdate } from \"svelte\";\r\n  import { data } from \"../data.js\";\r\n  import { ratio, theme } from \"../store/stats.js\";\r\n  import formateDate from \"../utils/formateDate.js\";\r\n  import findMaxValue from \"../utils/findMaxValue.js\";\r\n  import { changeScale } from \"./helpers.js\";\r\n\r\n  import Map from \"./map.svelte\";\r\n\r\n  let canvasRef;\r\n  let chartRef;\r\n\r\n  let ctx;\r\n\r\n  export let xData;\r\n  export let yData;\r\n  export let colors;\r\n  export let title;\r\n\r\n  let widthColumn = 30;\r\n  let tooltip;\r\n  let limit = 0;\r\n  let currentPositionX = 0;\r\n  let initialPositionX = 0;\r\n  let isMouseDown = false;\r\n  let positionXMap = 0;\r\n  let offset = 0;\r\n  let previousIndex;\r\n  let currentColumn;\r\n\r\n  const widthCanvas = xData.length * widthColumn;\r\n  const dataArray = xData.map((val, i) => i * widthColumn);\r\n  const dataKeys = Object.keys(yData);\r\n\r\n  $: columns = xData.map((val, i) => i * widthColumn + currentPositionX);\r\n\r\n  let endDay;\r\n  let startDay;\r\n\r\n  $: {\r\n    startDay = Math.round(-currentPositionX / widthColumn);\r\n    endDay = startDay + Math.round(1000 / widthColumn);\r\n  }\r\n\r\n  onMount(() => {\r\n    if (canvasRef.getContext) {\r\n      ctx = canvasRef.getContext(\"2d\");\r\n      draw(ctx);\r\n    }\r\n  });\r\n\r\n  afterUpdate(() => {\r\n    offset = chartRef.offsetLeft;\r\n  });\r\n\r\n  const draw = () => {\r\n    drawRectangle(ctx, 5);\r\n    drawAxis(ctx);\r\n    drawTextX(ctx);\r\n    drawTextY(ctx);\r\n  };\r\n\r\n  const drawRectangle = (ctx, h) => {\r\n    // const max = findMaxValue(yData);\r\n    // const scale = 100 / (max * dataKeys.length);\r\n    const width = h === 5 ? widthColumn : 1000 / xData.length;\r\n\r\n    for (let i = 0; i < xData.length; i++) {\r\n      dataKeys.map((key, index) => {\r\n        ctx.lineWidth = 2;\r\n        ctx.beginPath();\r\n        ctx.moveTo(i * width, h * 100 - yData[key][i] * h);\r\n        ctx.lineTo((i + 1) * width, h * 100 - yData[key][i + 1] * h);\r\n        ctx.strokeStyle = colors[index];\r\n        ctx.stroke();\r\n      });\r\n    }\r\n  };\r\n\r\n  const drawAxis = ctx => {\r\n    for (let i = 0; i < 5; i++) {\r\n      ctx.fillStyle = \"#eee\";\r\n      ctx.lineWidth = 0.2;\r\n      ctx.beginPath();\r\n      ctx.moveTo(widthColumn, 92 * i);\r\n      ctx.lineTo(widthCanvas * 3, 92 * i);\r\n      ctx.strokeStyle = \"#000\";\r\n      ctx.stroke();\r\n    }\r\n  };\r\n\r\n  const drawTextX = ctx => {\r\n    ctx.fillStyle = \"#a6a6a6\";\r\n    for (let i = 0; i < xData.length; i++) {\r\n      if (i % 5 === 0) {\r\n        const date = formateDate(xData[i], \"short\");\r\n        ctx.font = \"14px Roboto\";\r\n        ctx.fillText(date, widthColumn * (i + 1), 480);\r\n      }\r\n    }\r\n  };\r\n\r\n  const drawTextY = (ctx, y = 15) => {\r\n    ctx.fillStyle = \"#737373\";\r\n    for (let i = 0; i < 5; i++) {\r\n      const date = formateDate(xData[i], \"short\");\r\n      ctx.font = \"14px Roboto\";\r\n      ctx.fillText(100 - i * 20, y, i * 92 - 5);\r\n    }\r\n  };\r\n\r\n  const drawLine = index => {\r\n    ctx.beginPath();\r\n    ctx.moveTo(index * widthColumn, 0);\r\n    ctx.lineTo(index * widthColumn, 504);\r\n    ctx.lineWidth = 0.3;\r\n    ctx.strokeStyle = $theme === \"light\" ? \"#000\" : \"#fff\";\r\n    ctx.stroke();\r\n  };\r\n\r\n  const drawPoint = index => {\r\n    dataKeys.map((key, i) => {\r\n      ctx.lineWidth = 2;\r\n      ctx.beginPath();\r\n      ctx.arc(\r\n        index * widthColumn,\r\n        500 - yData[key][index] * 5,\r\n        5,\r\n        0,\r\n        Math.PI * 2\r\n      );\r\n      ctx.strokeStyle = $theme === \"light\" ? \"#C9AF4F\" : \"#fff\";\r\n      ctx.stroke();\r\n    });\r\n  };\r\n\r\n  const getLimitBorder = x => {\r\n    if (!currentColumn || !isMouseDown) {\r\n      currentColumn = findColumnIndex(x);\r\n    }\r\n    limit = currentColumn * widthColumn + widthColumn + currentPositionX;\r\n  };\r\n\r\n  const findColumnIndex = (x, dataArray = columns) => {\r\n    const position = x - offset;\r\n    return dataArray.findIndex(\r\n      (column, i) => column <= position && position <= dataArray[i + 1]\r\n    );\r\n  };\r\n\r\n  const checkTooltipBorders = x => {\r\n    let rightX = x - offset;\r\n\r\n    if (rightX < 100) {\r\n      rightX = 100;\r\n    }\r\n    if (rightX > 940) {\r\n      rightX = 940;\r\n    }\r\n\r\n    return rightX;\r\n  };\r\n\r\n  const updateDataTooltip = e => {\r\n    const index = findColumnIndex(e.clientX);\r\n    const dateColumn = formateDate(xData[index], \"long\");\r\n    const views = Object.keys(yData).map(key => yData[key][index]);\r\n\r\n    tooltip = {\r\n      ...tooltip,\r\n      date: dateColumn,\r\n      views\r\n    };\r\n  };\r\n\r\n  const updatePositionTooltip = e => {\r\n    tooltip = {\r\n      ...tooltip,\r\n      x: checkTooltipBorders(e.clientX),\r\n      y: e.clientY\r\n    };\r\n  };\r\n\r\n  const renderTooltip = e => {\r\n    if (!chartRef.contains(e.target)) {\r\n      tooltip = null;\r\n      return;\r\n    }\r\n    updateDataTooltip(e);\r\n    updatePositionTooltip(e);\r\n  };\r\n\r\n  const checkChartBorders = (x, translate, widthChart) => {\r\n    let position = translate;\r\n\r\n    const currentWidth = xData.length * widthColumn - 1000;\r\n\r\n    if (translate >= currentWidth) {\r\n      return -currentWidth + 10;\r\n    }\r\n    if (translate <= 0) {\r\n      position = 0;\r\n    } else {\r\n      position = -translate;\r\n    }\r\n\r\n    return position;\r\n  };\r\n\r\n  const drawCurrenValue = e => {\r\n    const index = findColumnIndex(e.clientX);\r\n\r\n    if (previousIndex === index) {\r\n      return;\r\n    }\r\n    previousIndex = index;\r\n\r\n    ctx.clearRect(0, 0, widthCanvas * 3, 504);\r\n    draw(ctx);\r\n    drawPoint(index);\r\n    drawLine(index);\r\n  };\r\n\r\n  const handleMouseMove = e => {\r\n    if (isMouseDown) {\r\n      const translate = -1 * (e.clientX - initialPositionX);\r\n\r\n      currentPositionX = checkChartBorders(\r\n        e.clientX,\r\n        translate,\r\n        widthCanvas - 1000\r\n      );\r\n      positionXMap = currentPositionX / $ratio;\r\n      updatePositionTooltip(e);\r\n    } else {\r\n      renderTooltip(e);\r\n    }\r\n    drawCurrenValue(e);\r\n    getLimitBorder(e.clientX);\r\n  };\r\n\r\n  const handleMouseDown = e => {\r\n    initialPositionX = e.pageX + -1 * currentPositionX;\r\n    isMouseDown = true;\r\n  };\r\n\r\n  const handleMouseLeave = () => {\r\n    isMouseDown = false;\r\n    tooltip = null;\r\n  };\r\n\r\n  const handleMouseEnter = e => {\r\n    renderTooltip(e);\r\n  };\r\n\r\n  const moveSlider = ({ detail }) => {\r\n    const { positionXMap } = detail;\r\n    currentPositionX = -positionXMap * $ratio;\r\n  };\r\n\r\n  const handleChangeScale = ({ detail }) => {\r\n    if (!ctx) {\r\n      return;\r\n    }\r\n\r\n    const { newRatio, position, column } = changeScale({ detail });\r\n\r\n    widthColumn = column;\r\n    currentPositionX = position;\r\n    ratio.update(() => newRatio);\r\n\r\n    ctx.clearRect(0, 0, widthCanvas * 3, 504);\r\n    draw(ctx);\r\n  };\r\n</script>\r\n\r\n<style>\r\n  .title {\r\n    margin-bottom: 48px;\r\n    font-weight: bold;\r\n    font-size: 18px;\r\n  }\r\n  .chart-two {\r\n    margin: 48px auto;\r\n  }\r\n  .chart {\r\n    position: relative;\r\n    height: 505px;\r\n    width: 1000px;\r\n    overflow: hidden;\r\n  }\r\n  .tooltip {\r\n    position: absolute;\r\n    padding: 8px 12px;\r\n    box-shadow: 1px 1px 4px 0px rgba(0, 0, 0, 0);\r\n    border-radius: 10px;\r\n  }\r\n\r\n  .tooltip--light {\r\n    background: #fff;\r\n    border: 1px solid rgb(238, 227, 227);\r\n    color: #000;\r\n  }\r\n  .tooltip--dark {\r\n    background: #1c2533;\r\n    border: 1px solid #1c2533;\r\n    color: #fff;\r\n  }\r\n  .date {\r\n    line-height: 1.5em;\r\n    font-weight: 600;\r\n  }\r\n  .views {\r\n    font-weight: 600;\r\n    color: #64aded;\r\n  }\r\n  .header {\r\n    width: 100%;\r\n    display: flex;\r\n    justify-content: space-between;\r\n  }\r\n</style>\r\n\r\n<div class=\"chart-two\">\r\n  <div class=\"header\">\r\n    <p class=\"title\">{title}</p>\r\n    <p>\r\n      {formateDate(xData[startDay], 'short')} - {formateDate(xData[endDay], 'short')}\r\n    </p>\r\n  </div>\r\n  <div\r\n    class=\"chart\"\r\n    bind:this={chartRef}\r\n    on:mousemove={handleMouseMove}\r\n    on:mousedown={handleMouseDown}\r\n    on:mouseleave={handleMouseLeave}\r\n    on:mouseup={() => (isMouseDown = false)}\r\n    style={isMouseDown ? 'cursor: grabbing' : 'cursor: grab'}>\r\n\r\n    <canvas\r\n      bind:this={canvasRef}\r\n      on:mouseover={handleMouseEnter}\r\n      class=\"cnvs\"\r\n      width={widthCanvas * 3}\r\n      height=\"504px\"\r\n      style=\"transform: translateX({currentPositionX}px);\" />\r\n\r\n    {#if tooltip}\r\n      <div\r\n        class=\"tooltip tooltip--{$theme}\"\r\n        style=\"top: 10px; left: {tooltip.x - 65}px\">\r\n        <p class=\"date\">{tooltip.date}</p>\r\n        <section class=\"info\">\r\n          {#each tooltip.views as views, i}\r\n            <div class=\"views\" style=\"color: {colors[i]}\">\r\n              {Object.keys(yData)[i]}:\r\n              <span>{views}</span>\r\n            </div>\r\n          {/each}\r\n\r\n        </section>\r\n      </div>\r\n    {/if}\r\n  </div>\r\n\r\n  <Map\r\n    positionChart={positionXMap}\r\n    on:move={moveSlider}\r\n    on:changeScale={handleChangeScale}\r\n    columnChart={widthColumn}\r\n    draw={drawRectangle}\r\n    {xData}\r\n    {yData} />\r\n</div>\r\n",
    "<script>\r\n  import { onMount, afterUpdate, createEventDispatcher } from \"svelte\";\r\n  import { data } from \"../data.js\";\r\n  import { ratio } from \"../store/stats.js\";\r\n  import { setContext, getContext } from \"svelte\";\r\n  import { theme } from \"../store/stats\";\r\n\r\n  const dispatch = createEventDispatcher();\r\n\r\n  export let positionChart;\r\n  export let columnChart;\r\n  export let xData;\r\n  export let yData;\r\n  export let draw;\r\n\r\n  let canvasRef;\r\n  let mapRef;\r\n\r\n  const widthBorder = 5;\r\n  const widthColumn = 1000 / xData.length;\r\n\r\n  let isMouseDown = false;\r\n  let isMovingRightBorder = false;\r\n  let isMovingLeftBorder = false;\r\n\r\n  let scale = 300;\r\n  let offset = 0;\r\n\r\n  let leftBorder = 0;\r\n  let rightBorder = leftBorder + scale + 15;\r\n  let distance;\r\n\r\n  let ratioMap = 32;\r\n  $: scale = ratioMap * widthColumn;\r\n  $: leftBorder = -positionChart || 0;\r\n\r\n  onMount(() => {\r\n    if (!canvasRef.getContext) {\r\n      return;\r\n    }\r\n    const ctx = canvasRef.getContext(\"2d\");\r\n    draw(ctx, 0.5);\r\n\r\n    ratio.update(() => columnChart / widthColumn);\r\n  });\r\n\r\n  afterUpdate(() => {\r\n    offset = mapRef.offsetLeft;\r\n  });\r\n\r\n  const checkChartBorders = x => {\r\n    if (x < 0) {\r\n      return 0;\r\n    }\r\n    if (x + scale > 1000) {\r\n      return 990 - scale;\r\n    }\r\n\r\n    return x;\r\n  };\r\n\r\n  const checkRightSlider = x => {\r\n    if (x - leftBorder < 150 && x < rightBorder) {\r\n      x = rightBorder;\r\n    }\r\n    return x;\r\n  };\r\n\r\n  const checkLeftSlider = x => {\r\n    if (rightBorder - x < 150 && x > leftBorder) {\r\n      x = leftBorder;\r\n    }\r\n    return x;\r\n  };\r\n\r\n  const handleSliderMove = e => {\r\n    if (!isMouseDown) {\r\n      return;\r\n    }\r\n\r\n    const x = e.clientX;\r\n\r\n    if (!distance) {\r\n      distance = x - leftBorder;\r\n    }\r\n\r\n    leftBorder = checkChartBorders(x - distance);\r\n    rightBorder = leftBorder + scale + widthBorder;\r\n\r\n    dispatch(\"move\", { positionXMap: leftBorder });\r\n  };\r\n\r\n  const handleDownRightBorder = e => {\r\n    isMovingRightBorder = true;\r\n  };\r\n\r\n  const handleDownLeftBorder = e => {\r\n    isMovingLeftBorder = true;\r\n  };\r\n\r\n  const handleMoveBorder = e => {\r\n    if (isMouseDown) {\r\n      handleSliderMove(e);\r\n    }\r\n\r\n    if (!isMovingRightBorder && !isMovingLeftBorder) {\r\n      return;\r\n    }\r\n\r\n    if (isMovingRightBorder) {\r\n      rightBorder = checkRightSlider(e.clientX - offset);\r\n    } else {\r\n      leftBorder = checkLeftSlider(e.clientX - offset);\r\n    }\r\n\r\n    ratioMap = (rightBorder - widthBorder - leftBorder) / widthColumn;\r\n    dispatch(\"changeScale\", {\r\n      leftBorder,\r\n      ratioMap,\r\n      widthColumnMap: widthColumn\r\n    });\r\n  };\r\n\r\n  const resetMouseActions = () => {\r\n    isMovingLeftBorder = false;\r\n    isMovingRightBorder = false;\r\n    isMouseDown = false;\r\n    distance = null;\r\n  };\r\n</script>\r\n\r\n<style>\r\n  .map-wrapper {\r\n    position: relative;\r\n    width: 1000px;\r\n    height: 50px;\r\n    overflow: hidden;\r\n  }\r\n  .map,\r\n  .mask {\r\n    border-radius: 5px;\r\n  }\r\n\r\n  .mask {\r\n    position: absolute;\r\n    height: 100%;\r\n    width: 1000px;\r\n  }\r\n\r\n  .mask--light {\r\n    background: rgba(226, 238, 249, 1);\r\n  }\r\n\r\n  .mask--dark {\r\n    background: #2b3645;\r\n  }\r\n\r\n  .left {\r\n    left: 0;\r\n  }\r\n\r\n  .handle {\r\n    position: absolute;\r\n    border-radius: 5px;\r\n    height: calc(100% - 6px);\r\n    z-index: 2;\r\n    cursor: grab;\r\n  }\r\n\r\n  .handle--light {\r\n    border: 3px solid #c0d1e1;\r\n  }\r\n  .handle--dark {\r\n    border: 3px solid #56626d;\r\n  }\r\n\r\n  .border {\r\n    position: absolute;\r\n    width: 12px;\r\n    height: 100%;\r\n    cursor: w-resize;\r\n    z-index: 2;\r\n  }\r\n\r\n  .border--light {\r\n    background: #c0d1e1;\r\n  }\r\n  .border--dark {\r\n    background: #56626d;\r\n  }\r\n\r\n  .border_left {\r\n    border-bottom-left-radius: 6px;\r\n    border-top-left-radius: 6px;\r\n    left: 0;\r\n  }\r\n  .border_left::after,\r\n  .border_right::after {\r\n    position: absolute;\r\n    background: white;\r\n    width: 3px;\r\n    border-radius: 4px;\r\n    height: 15px;\r\n    left: 5px;\r\n    top: 17px;\r\n    display: block;\r\n    content: \" \";\r\n    z-index: 1;\r\n    cursor: w-resize;\r\n    -moz-user-select: none;\r\n    -webkit-user-select: none;\r\n    -webkit-tap-highlight-color: transparent;\r\n  }\r\n\r\n  .border_right {\r\n    border-bottom-right-radius: 6px;\r\n    border-top-right-radius: 6px;\r\n  }\r\n</style>\r\n\r\n<svelte:window\r\n  on:mousemove={handleMoveBorder}\r\n  on:mouseup={resetMouseActions}\r\n  on:mouseenter={resetMouseActions} />\r\n\r\n<div class=\"map-wrapper\" bind:this={mapRef}>\r\n  <div\r\n    class=\"mask mask--{$theme} right\"\r\n    style=\"transform: translateX({leftBorder + scale + widthBorder}px); width: {1000 - scale - leftBorder}px\" />\r\n  <div\r\n    class=\"mask mask--{$theme} left\"\r\n    style=\"transform: translateX({leftBorder - 1000}px);\" />\r\n\r\n  <div\r\n    on:mousedown={() => (isMouseDown = true)}\r\n    class=\"handle handle--{$theme}\"\r\n    style=\"transform: translateX({leftBorder + widthBorder}px); width: {scale}px\" />\r\n\r\n  <div\r\n    class=\"border border--{$theme} border_left\"\r\n    style=\"transform: translateX({leftBorder}px);\"\r\n    on:mousedown={handleDownLeftBorder} />\r\n  <div\r\n    class=\"border border--{$theme} border_right\"\r\n    style=\"transform: translateX({leftBorder + scale + widthBorder}px);\"\r\n    on:mousedown={handleDownRightBorder} />\r\n\r\n  <canvas\r\n    bind:this={canvasRef}\r\n    class=\"map\"\r\n    width=\"1000px\"\r\n    height=\"50px\"\r\n    style=\"transform: translateX(0px);\" />\r\n</div>\r\n"
  ],
  "names": [],
  "mappings": "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"
}